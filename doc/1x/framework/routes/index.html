<!DOCTYPE html><html lang="en" style=""><head><meta><meta><base href="/nimble-page/"><meta charset="utf-8"><title>Framework / Document - Nimble</title><link rel="icon" type="image/x-icon" href="favicon.ico"><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap" rel="stylesheet"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1"><link href="main.bundle.d6281828606dd3221071.css?d6281828606dd3221071" rel="stylesheet"><link rel="stylesheet" type="text/css" href="15.bundle.d6281828606dd3221071.css"><script charset="utf-8" src="15.bundle.cb9a39b9bd8d61b6ba79.js"></script><link rel="stylesheet" type="text/css" href="13.bundle.d6281828606dd3221071.css"><script charset="utf-8" src="13.bundle.a2fe7c4c0ff845a50663.js"></script><link rel="stylesheet" type="text/css" href="9.bundle.d6281828606dd3221071.css"><script charset="utf-8" src="9.bundle.317f1777f684b22b4e6e.js"></script></head><body style=""><nimble-root style="visibility: hidden;"><nimble-page><div class="root-page">  <nimble-router class="root-content animated fadeIn"><nimble-page><div class="document-page"> <div class="document-page-left"> <div class="document-page-left-header"> <div class="home-header-menu-close"></div> <div class="header-logo"> <a class="d-block" href="/"> <img src="assets/img/logo_white.png"> </a> </div> </div> <div class="document-page-left-menu"> <ul> <li>  <span> Essenciais </span> <ul> <li> <a href="/doc/1x/essentials/introduction"> Introdução </a>  </li><li> <a href="/doc/1x/essentials/get-started"> Começar a usar </a>  </li><li> <a href="/doc/1x/essentials/structure"> Estrutura do framework </a>  </li> </ul> </li><li>  <span> Framework </span> <ul> <li> <a href="/doc/1x/framework/pages"> Páginas </a>  </li><li class="active"> <a href="/doc/1x/framework/routes"> Rotas </a>  </li><li> <a href="/doc/1x/framework/dialogs"> Diálogs (Modal) </a>  </li><li> <a href="/doc/1x/framework/services"> Serviços (Services) </a>  </li><li> <a href="/doc/1x/framework/directives"> Diretivas </a>  </li> </ul> </li><li>  <span> CLI (Command Line Interface) </span> <ul> <li> <a href="/doc/1x/cli/overview"> Visão geral </a>  </li><li> <a href="/doc/1x/cli/commands"> Comandos interativos </a>  </li><li> <a href="/doc/1x/cli/args"> Comandos via argumentos </a>  </li> </ul> </li> </ul> </div> </div> <div class="document-page-left-menu-backdrop"></div> <div class="document-page-right"> <div class="document-page-right-header"> <div class="d-table-cell align-middle"> <div class="document-page-toggle-menu"> <span></span> </div> <div class="header-logo"> <a href="/"></a> </div> <div class="version-select"> <form> <label class="mr-1 mb-0">Version: </label> <select> <option value="1x"> 1.2.14  </option> </select> </form> </div> </div> <div class="d-table-cell align-middle text-right"> <div class="document-page-search"> <i class="material-icons" role="button" title="Procurar"> search </i> </div> <div class="document-page-lang"> <span> <img alt="pt-BR" src="assets/img/langs/pt-BR.png"> </span>  </div> </div> </div> <div class="document-page-right-content"> <nimble-router class="document-page-content-inner"><nimble-page><div class="framework-1x-routes-page"> <h1> Rotas </h1> <p class="text-justify mt-2"> As rotas no Nimble é a "arquitetura" do projeto, são elas que difinem onde e como as páginas serão renderizadas e posteriormente exibidas. Assim árvores possuem raiz, troncos e folhas, na estrutura de rotas não é diferente muito diferente. Abaixo será mostrado exemplo de uma estrutura de rotas, e como ela pode ser flexivel para atender diveras situções. </p> <section class="mb-1"> <h4> <a name="structure" href="/doc/1x/framework/routes#structure"> A estrutura </a> </h4> <p>O Nimble trabalha com um estrutura rotas, onde cada de rota basea-se na classe <code>RouteBase</code> mostrada abaixo:</p> <pre>            <code class="typescript hljs css">
<span class="hljs-keyword">class</span> RouteBase {
    <span class="hljs-comment">// Caminho de rota para página </span>
    <span class="hljs-keyword">public</span> path: <span class="hljs-built_in">string</span>;
    
    <span class="hljs-comment">// Página propriamente dita</span>
    <span class="hljs-keyword">public</span> page?: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">Promise</span> | Type&lt;Page&gt; | <span class="hljs-built_in">string</span>;
    
    <span class="hljs-comment">// Caso a página possua filhos</span>
    <span class="hljs-keyword">public</span> children?: RouteBase[];
    
    <span class="hljs-comment">// Dados da rota que poderão ser atribuidos à página</span>
    <span class="hljs-keyword">public</span> data?: { [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span> };
    
    <span class="hljs-comment">// Caso a rota precise ser redirecionada para outra qualquer</span>
    <span class="hljs-keyword">public</span> redirect?: <span class="hljs-built_in">string</span>;

    <span class="hljs-comment">// Cria regras ou restrições para acessar a rota</span>
    <span class="hljs-keyword">public</span> routeActivate?: Type&lt;ActivateRoute&gt;[];
}
            </code>
        </pre> </section> <section class="mb-1"> <h4> <a name="cases" href="/doc/1x/framework/routes#cases"> Alguns casos de uso </a> </h4> <p class="mb-5">Existem formas variádas de se construir uma estrutura de rotas para compor uma página, desde uma simples rota até árvores um pouco mais complexas ou até mesmo redirecionamentos.</p> <section class="mt-2"> <h5 class="border-0 mb-1 pb-1">Simples</h5> <p>Caso que possui apenas um caminho simples para renderizar uma página:</p> <pre>                <code class="typescript hljs css">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ROUTES: RouteBase[] = [
    {
        path: <span class="hljs-string">'home'</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/home/home.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.HomePage)
    }
]
                </code>
            </pre> </section> <section class="mt-3"> <h5 class="border-0 mb-1 pb-1">Páginas abstratas</h5> <p>Caso em que é necessário uma página abstrata como base, tornando todo seu conteúdo reaproveitável pelas rotas filhas.</p> <p>Observe que neste caso a rota que possui <code>children</code> não é uma página propriamente dita, mas sim uma parte da composição de cada uma das rotas filhas:</p> <pre>                <code class="typescript hljs css">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ROUTES: RouteBase[] = [
    {
        path: <span class="hljs-string">''</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/root/root.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.RootPage)
        children: [
            {
                path: <span class="hljs-string">''</span>,
                page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/home/home.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.HomePage)
            },
            {
                path: <span class="hljs-string">'about-us'</span>,
                page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/about-us/about-us.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.AboutUsPage)
            }
        ]
    }
]
                </code>
            </pre> </section> <section class="mt-3"> <h5 class="border-0 mb-1 pb-1">Abstrata e composta</h5> <p>Bem parecida com a anterior, esta possui um exemplo mais variado de seu uso:</p> <pre>                <code class="typescript hljs css">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ROUTES: RouteBase[] = [
    {
        path: <span class="hljs-string">''</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/home/home.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.HomePage)
    },
    {
        path: <span class="hljs-string">'about-us'</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/about-us/about-us.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.AboutUsPage)
    },
    {
        path: <span class="hljs-string">'admin'</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/admin-root/admin-root.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.AdminRootPage)
        children: [
            {
                path: <span class="hljs-string">'login'</span>,
                page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/admin-login/admin-login.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.AdminLoginPage)
            },
            {
                path: <span class="hljs-string">'dashboard'</span>,
                page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/admin-dashboard/admin-dashboard.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.AdminDashboardPage)
            },
        ]
    }
]
                </code>
            </pre> </section> <section class="mt-2"> <h5 class="border-0 mb-1 pb-1">Redirecionamento</h5> <p>É possível determinar um redirecionamento para quando uma rota específica for acessada:</p> <pre>                <code class="typescript hljs css">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ROUTES: RouteBase[] = [
    { path: <span class="hljs-string">'old-route'</span>, redirect: <span class="hljs-string">'/new-route'</span> },
    {
        path: <span class="hljs-string">'new-route'</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/home/home.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.HomePage)
    },
]
                </code>
            </pre> </section> <section class="mt-2"> <h5 class="border-0 mb-1 pb-1">Rotas não existentes</h5> <p>Assim como no exemplo anterior, é possível redirecionar para uma rota ou definir uma página caso de acesso a rotas que não existam:</p> <pre>                <code class="typescript hljs css">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ROUTES: RouteBase[] = [
    {
        path: <span class="hljs-string">'not-found'</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/not-found/not-found.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.NotFoundPage)
    },
    { path: <span class="hljs-string">'**'</span>, redirect: <span class="hljs-string">'/not-found'</span> },
]
                </code>
            </pre> </section> </section> <section class="mb-1"> <h4> <a name="data" href="/doc/1x/framework/routes#data"> Enviando dados nas rotas </a> </h4> <p class="mb-5">Existe uma grande possibilidade de reaproveitamento de páginas para diferentes rotas, por este e outros motivos torna-se viável a necessidade de envio de informações para páginas em rota específicas, veja um exemplo de uso abaixo.</p> <h5 class="border-0 mb-1 pb-1">Inserindo dados</h5> <p>No exemplo abaixo, temos duas rotas diferentes usando uma mesma página, que ambas então recebendo dados com conteúdo diferente.</p> <pre>            <code class="typescript hljs css">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ROUTES: RouteBase[] = [
    {
        path: <span class="hljs-string">'example01'</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/example/example.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.ExamplePage),
        data: { myData: <span class="hljs-string">'Hello example 1'</span> }
    },
    {
        path: <span class="hljs-string">'example02'</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/example/example.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.ExamplePage),
        data: { myData: <span class="hljs-string">'Hello example 2'</span> }
    }
]
            </code>
        </pre> <h5 class="border-0 mb-1 pb-1">Recuperando dados na página</h5> <p>Para recuperar estas informações dentro da página, basta injetar a dependência <code>RouteParams</code> no construtor da página.</p> <pre>            <code class="typescript hljs css">
<span class="hljs-keyword">import</span> { Page, PreparePage, RouteParams } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nimble-ts/core'</span>;

<span class="hljs-meta">@PreparePage</span>({
    template: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./example.page.html'</span>),
    style: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./example.page.scss'</span>)
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> ExamplePage <span class="hljs-keyword">extends</span> Page {

    <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
        <span class="hljs-keyword">private</span> routeParams: RouteParams
    </span>) {
        <span class="hljs-keyword">super</span>();
    }

    <span class="hljs-keyword">public</span> onInit() {
        <span class="hljs-keyword">let</span> myData = <span class="hljs-keyword">this</span>.routeParams.data.myData;
        <span class="hljs-built_in">console</span>.log(myData);
    }

}
            </code>
        </pre> </section> <section class="mb-1"> <h4> <a name="parameters" href="/doc/1x/framework/routes#parameters"> Parâmetros (path params) </a> </h4> <p class="mb-5">Algo muito necessário em rotas, sem dúvidas, são os parâmetros de rotas, que auxiliam bastante no dinamismo das páginas, veja exemplo de utilização abaixo.</p> <h5 class="border-0 mb-1 pb-1">Preparando o parâmetro</h5> <p>No exemplo abaixo, temos duas rotas, uma para listar os artigos e outro para acessar um artigo específico. O parâmetro é sempre identificado entre chaves.</p> <pre>            <code class="typescript hljs css">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ROUTES: RouteBase[] = [
    {
        path: <span class="hljs-string">'articles'</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/articles/articles.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.ArticlesPage)
    },
    {
        path: <span class="hljs-string">'articles/{id}'</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/article/article.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.ArticlePage),
    }
]
            </code>
        </pre> <h5 class="border-0 mb-1 pb-1">Recuperando parâmetros na página</h5> <p>Para recuperar os parâmetros dentro da página, basta injetar a dependência <code>RouteParams</code> no construtor da página.</p> <pre>            <code class="typescript hljs css">
<span class="hljs-keyword">import</span> { Page, PreparePage, RouteParams } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nimble-ts/core'</span>;

<span class="hljs-meta">@PreparePage</span>({
    template: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./article.page.html'</span>),
    style: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./article.page.scss'</span>)
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> ArticlePage <span class="hljs-keyword">extends</span> Page {

    <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
        <span class="hljs-keyword">private</span> routeParams: RouteParams
    </span>) {
        <span class="hljs-keyword">super</span>();
    }

    <span class="hljs-keyword">public</span> onInit() {
        <span class="hljs-keyword">let</span> articleId = <span class="hljs-keyword">this</span>.routeParams.params.id;
        <span class="hljs-built_in">console</span>.log(articleId);
    }

}
            </code>
        </pre> </section> <section class="mb-1"> <h4> <a name="guard" href="/doc/1x/framework/routes#guard"> Guardiões de rota </a> </h4> <p class="mb-3">Em alguns casos é preciso restringir acessos a determinadas rotas partir de algum critério ou regra, com os guardiões de rotas é possível, veja exemplos de utilização abaixo.</p> <p class="mb-3">Uma classe guardiã sempre deverá ter implementada o método <code>onActive</code>, que sempre retornará um <code>booleano</code>, sendo <strong>true</strong> para permitir prosseguir e <strong>false</strong> para interromper o progresso do usuário até rota seguinte.</p> <p class="mb-5"> <span>O exemplo abaixo será cosiderado já ter um arquivo de classe <i>guard</i> já criada. Caso queira saber como criar clique </span> <a href="/doc/1x/cli/commands#generate-guard">aqui</a>. </p> <section class="mt-2"> <h5 class="border-0 mb-1 pb-1">Incluindo classe guardiã na rota</h5> <p>Incluir uma classe guadiã numa rota é bem simples, basta encontrar a rota, inserir a propriedade guard coloca-la dentro de um <i>array</i> . Neste exemplo, existe uma parte específica da árvore de rotas que não poderá ser acessível.</p> <pre>                <code class="typescript hljs css">
<span class="hljs-keyword">import</span> { RouteBase } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nimble-ts/core'</span>;
<span class="hljs-keyword">import</span> { AuthGuard } <span class="hljs-keyword">from</span> <span class="hljs-string">'./route-guards/auth.guard'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ROUTES: RouteBase[] = [
    {
        path: <span class="hljs-string">'login'</span>,
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/public/login/login.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.LoginPage)
    }
    {
        path: <span class="hljs-string">'admin'</span>,
        guard: [AuthGuard],
        page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/admin/admin.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.AdminPage),
        children: [
            {
                path: <span class="hljs-string">'dashboard'</span>,
                page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/admin/dashboard/dashboard.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.DashboardPage)
            },
            {
                path: <span class="hljs-string">'users'</span>,
                page: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/admin/users/users.page'</span>).then(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.UsersPage)
            }         
        ]
    }
];
                </code>
            </pre> </section> <section class="mt-2"> <h5 class="border-0 mb-1 pb-1">Incluindo classe guardiã na rota</h5> <p>Nesta classe guardiã, ela restringirá o acesso a certas páginas caso o usuário não esteja autenticado, e o direcionará para outra rota em caso de falha.</p> <pre>                <code class="typescript hljs css">
<span class="hljs-keyword">import</span> { RouteGuard, Route, Router, Injectable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nimble-ts/core'</span>;
<span class="hljs-keyword">import</span> { AuthService } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/services/auth.service'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> AuthGuard <span class="hljs-keyword">extends</span> RouteGuard {

    <span class="hljs-keyword">constructor</span>(<span class="hljs-params">
        <span class="hljs-keyword">private</span> authService: AuthService
    </span>){
        <span class="hljs-keyword">super</span>();
    }

    <span class="hljs-keyword">public</span> doActivate(currentPath: <span class="hljs-built_in">string</span>, nextPath: <span class="hljs-built_in">string</span>, route: Route): <span class="hljs-built_in">boolean</span> {
    
        <span class="hljs-keyword">if</span> (nextPath !== <span class="hljs-string">'/login'</span> &amp;&amp; !<span class="hljs-keyword">this</span>.authService.isLogged) {
            Router.redirect(<span class="hljs-string">'/login'</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
                </code>
            </pre> </section> </section> </div></nimble-page></nimble-router> </div> </div> </div></nimble-page></nimble-router> </div></nimble-page></nimble-root><script type="text/javascript" src="main.bundle.46e668f5adad81ef7acb.js?d6281828606dd3221071"></script></body></html>