<!DOCTYPE html><html lang="pt" style=""><head><base href="/nimble-page/"><meta charset="utf-8"><title>SSR / Document - Nimble</title><meta name="description" content="Nimble framework page and documentation"><meta name="keywords" content="nimble, nb, framework, typescript, javascript"><meta property="og:url" content="https://ericferreira1992.github.io/nimble-page"><meta property="og:description" content="Nimble framework page and documentation"><meta property="og:image" content="https://ericferreira1992.github.io/nimble-page/assets/img/banner.png"><meta property="og:type" content="webiste"><meta property="og:title" content="SSR / Document - Nimble"><meta property="og:siteName" content="SSR / Document - Nimble"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1"><meta name="theme-color" content="#5D2EE6"><link rel="icon" type="image/x-icon" href="favicon.ico"><link rel="manifest" href="manifest.json"><link href="main.bundle.354ba875c2cecf3c8cca.css" rel="stylesheet"><link rel="stylesheet" type="text/css" href="18.bundle.354ba875c2cecf3c8cca.css"><script charset="utf-8" src="18.bundle.213f0b5c260e5907f527.js"></script><link rel="stylesheet" type="text/css" href="0.bundle.354ba875c2cecf3c8cca.css"><script charset="utf-8" src="0.bundle.5a11359e6787494942bc.js"></script><link rel="stylesheet" type="text/css" href="20.bundle.354ba875c2cecf3c8cca.css"><script charset="utf-8" src="20.bundle.a155f03e80112f80a1df.js"></script><link rel="stylesheet" type="text/css" href="9.bundle.354ba875c2cecf3c8cca.css"><script charset="utf-8" src="9.bundle.29f0d658c23e3f8a8d52.js"></script></head><body style=""><nimble-root style="visibility: hidden;"><nimble-page><div class="root-page">  <nimble-router class="root-content fadeIn"><nimble-page><div class="document-page"> <div class="document-page-left"> <div class="document-page-left-header"> <div class="home-header-menu-close"></div> <div class="header-logo"> <a class="d-block" href="/"> <img src="assets/img/logo_white.png"> </a> </div> </div> <div class="document-page-left-menu"> <ul> <li> <a href="/doc/1x/essentials"> Essenciais </a>  <ul> <li> <a href="/doc/1x/essentials/introduction"> Introdução </a>   </li><li> <a href="/doc/1x/essentials/get-started"> Começar a usar </a>   </li><li> <a href="/doc/1x/essentials/structure"> Estrutura do framework </a>   </li><li class="active"> <a href="/doc/1x/essentials/ssr"> SSR (Renderização no lado do servidor) </a>  <ul> <li> <a href="/doc/1x/essentials/ssr#how-work"> Como funciona </a>  </li><li> <a href="/doc/1x/essentials/ssr#how-use"> Como utilizar </a>  </li><li> <a href="/doc/1x/essentials/ssr#dinamic-content"> Renderizar conteúdo dinâmico </a>  </li> </ul> </li> </ul> </li><li> <a href="/doc/1x/framework"> Framework </a>  <ul> <li> <a href="/doc/1x/framework/routes"> Rotas </a>   </li><li> <a href="/doc/1x/framework/pages"> Páginas </a>   </li><li> <a href="/doc/1x/framework/dialogs"> Diálogs (Modal) </a>   </li><li>  <span> Serviços (Services) </span>  </li><li>  <span> Diretivas </span>  </li><li> <a href="/doc/1x/framework/reactive-forms"> Formulários reativos </a>   </li> </ul> </li><li> <a href="/doc/1x/cli"> CLI (Command Line Interface) </a>  <ul> <li> <a href="/doc/1x/cli/overview"> Visão geral </a>   </li><li> <a href="/doc/1x/cli/commands"> Comandos interativos </a>   </li><li> <a href="/doc/1x/cli/args"> Comandos via argumentos </a>   </li> </ul> </li> </ul> </div> </div> <div class="document-page-left-menu-backdrop"></div> <div class="document-page-right"> <div class="document-page-right-header"> <div class="d-table-cell align-middle"> <div class="document-page-toggle-menu"> <span></span> </div> <div class="header-logo"> <a href="/"></a> </div> <div class="version-select"> <form> <label class="mr-1 mb-0">Version: </label> <select> <option value="1x"> 1.3.9 última </option> </select> </form> </div> </div> <div class="d-table-cell align-middle text-right"> <div class="document-page-search"> <i class="material-icons" title="Procurar" role="button"> search </i> </div> <div class="document-page-lang"> <span> <img src="assets/img/langs/pt-BR.png" alt="pt-BR"> </span>  </div> </div> </div> <div class="document-page-right-content"> <nimble-router class="document-page-content-inner"><nimble-page><div class="doc-1x-get-started-page"> <h1> SSR (Renderização no lado do servidor) </h1> <p class="text-justify mt-2">Como já deve-se saber, o Nimble é Framework SPA (<i>Single Page Application</i>), isso significa que o conteúdo inicial de qualquer página (index.html) contem no conteúdo do elemento <strong>body</strong> apenas o elemento <code>&lt;nimble-root&gt;&lt;/nimble-root&gt;</code> vazio e que, somente após a página ser retornada do servidor e carregada pelo navegador é que ela será toda construída dinamicamente via JavaScript.</p> <p class="text-justify mt-2">O SSR (que também é conhecido por "Renderização dinâmica") significa que todo o conteúdo de uma página foi processado pelo lado do servidor e foi retornada ao navegador, sem a necessidade de um código JavaScript para construir toda a página. Isso é excelente para motores de indexação como Google, já que o JavaScript no momento da indexação é desabilitado, fazendo com que somente conteúdos que foram retornados pelo servidor sejam possíveis de ser analisados.</p> <section> <h4> <a name="how-work" href="/doc/1x/essentials/ssr#how-work"> Como funciona </a> </h4> <p class="text-justify">No Nimble, o SSR ocorre durante o <i>build</i> do site para que seja feito o <i>deploy</i> posteriormente. Portanto, todo o conteúdo que for gerado neste momento será o que ficará estático, informações que são dinâmicas (como dados retornados de requisições HTTP) também serão possíveis nesse momento</p> <p class="text-justify mt-2">Um ponto importante aqui é que todo esse conteúdo estático que é gerado após o <i>build</i> é apenas para que o site não deixei de ser interpretado pelos mecanismos de busca, pois quando um visitante qualquer acessar o site, todo o conteúdo estático será ignorado e reconstruído, inclusiva as informações que são adquiridas dinamicamente (requisições HTTP).</p> </section> <section> <h4> <a name="how-use" href="/doc/1x/essentials/ssr#how-use"> Como utilizar </a> </h4> <p class="text-justify">Como o Nimble já faz muita coisa por "debaixo dos panos", torna-se fácil configurar/habilitar e utilizar o SSR para suas páginas. Esta configuração está presente no arquivo <code>nimble.json</code> (presente na raiz de todo projeto), onde possui uma propriedade chamada "pre-render" que possui duas informações que devem ser informadas:</p> <p class="text-justify mt-2">❯ <code>enabled</code> valor <i>booleano</i> que, caso definido como <strong>true</strong>, habilitará o SSR na realização de qualquer <i>build</i>.</p> <p class="text-justify mt-1">❯ <code>routes</code> lista de caminhos de rotas que serão geradas as páginas estáticas.</p> <p class="text-justify mt-2">Veja um exemplo de uso:</p> <pre class=" language-javascript">            <code class=" language-javascript">
<span class="token punctuation">{</span>
    <span class="token string">"pre-render"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">"enabled"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">"routes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"/"</span><span class="token punctuation">,</span>
            <span class="token string">"/about-us"</span><span class="token punctuation">,</span>
            <span class="token string">"/contact"</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"vendors"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">"js"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">"css"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
            </code>
        </pre> </section> <section> <h4> <a name="dinamic-content" href="/doc/1x/essentials/ssr#dinamic-content"> Renderizar conteúdo dinâmico </a> </h4> <p class="text-justify">Acima foi mostrado como funciona e também como fazer um <i>build</i> do projeto (site) com todo o seu conteúdo processado, mas existem casos em que páginas possam ter alguma ou várias informações que são trazidas de outras fontes (como uma API, por exemplo) como os casos em que dados são trazidos via requisições HTTP de maneira assíncrona, o que pode fazer com que parte do conteúdo da página fique sem estas informações em seu HTML final após o <i>build</i>.</p> <p class="text-justify mt-2">Nestes casos as requisições HTTP, ou qualquer outra chamada assíncrona, devem ser realizadas no método <code>onInit</code> presente no ciclo de vida de qualquer página, tornando-o um método assíncrono e sinalizar para este método que ele devará esperar a chamada assíncrona terminar. Desta forma o framework entenderá que todo o conteúdo da página foi carregada e poderá seguir em frente normalmente.</p> <p class="text-justify mt-2">Veja um exemplo de um página que trará informação de uma API, que será inserida a palavra reservada <code>async</code> antes do método <code>onInit</code> e também o <code>await</code> antes da chamada assíncrona HTTP.</p> <section class="mt-4"> <h5 class="pb-0 mb-0 border-0">Script da página</h5> <pre class=" language-javascript">                <code class=" language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> Page<span class="token punctuation">,</span> PreparePage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nimble-ts/core/page'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HttpClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nimble-ts/core/providers/http-client'</span><span class="token punctuation">;</span>

@<span class="token function">PreparePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    template<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./articles.page.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    style<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./articles.page.scss'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token string">'My articles'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ArticlesPage</span> <span class="token keyword">extends</span> <span class="token class-name">Page</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> articles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span>
        <span class="token parameter"><span class="token keyword">private</span> httpClient<span class="token operator">:</span> HttClient</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">async</span> <span class="token function">onInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>httpClient<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://api.my-web-site.com/articles'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>articles <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
                </code>
            </pre> </section> <section class="mt-2"> <h5 class="pt-1 pb-0 mb-0 border-0"><i>Template</i> da página</h5> <pre class=" language-html">                <code class=" language-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articles-page<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Artigos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">@for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>article of articles<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span>{{ article.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ article.content }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                </code>
            </pre> </section> </section> </div></nimble-page></nimble-router> </div> </div> </div></nimble-page></nimble-router> </div></nimble-page></nimble-root><script type="text/javascript" src="main.bundle.4e74356094bc62afbf6e.js"></script></body></html>